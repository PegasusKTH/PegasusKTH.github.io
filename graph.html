<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <title> Prerequisites </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <link rel="stylesheet" href="js/treant/Treant.css">
    <link href="css/pegasearch.css" rel="stylesheet">
    <link href="css/graph.css" rel="stylesheet">
    <link rel="icon" href="image/tab-logo.png">
    <!-- fonts from google api for the headers -->
    <link href="https://fonts.googleapis.com/css2?family=Aclonica&family=Audiowide&family=Days+One&family=Fredoka+One&family=Shrikhand&display=swap" rel="stylesheet">
    <!-- fonts from google api for the content text -->
    <link href="https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@300&family=Manrope&family=Montserrat&family=Rubik&display=swap" rel="stylesheet">
  </head>

  <body style="background-image: url('image/background3-version2.jpg');" class="background" >

      <div id = "loadingContainer">
        <img class= "col-lg-3 col-md-3 col-sm-3 col-xs-3"  id = "loading-image" src = "image/animation-big-glitter-dark-shadow.gif" />
        <!-- RIP cat -->
        <!-- <img class= "col-lg-1 col-md-1 col-sm-1 col-xs-1"  id = "loading-image-bar" src = "image/catSpin.gif"/> -->
        <p id="loadingText">Building treestructure</p>
      </div>

      <script type="text/javascript" src="js/lookup.js"></script>
      <script type="text/javascript" src="js/node.js"></script>
      <script type="text/javascript" src="js/main.js"></script>

    <div id="container">
      <div id="content-wrap">
        <div name="title" >
          <a href="index.html">
            <img src = "image/logo.png" class="pegasus" alt="Logo Pegasus Project group" title="Learning is Magic">
          </a>
          <h1 id="prereqHeader"></h1>
          <!-- writes Prerequisites for course: XXXX. XXXX is replaced with course code  -->
          <script>
            var urlCourse = window.location.href.match(/[A-Z][A-Z][0-9][0-9][0-9][0-9]/gi);
            if (urlCourse != null){
              document.getElementById("prereqHeader").innerHTML = " prerequisites for course: " + urlCourse[0].toUpperCase();
            }
          </script>
        </div>

        <div>
          <div class ="graphSearchBoxDiv col-lg-6 col-md-6 col-sm-6 col-xs-6" id="graphSearchBox">
            <form action="graph.html" method="GET">
              <input type="text" name="courseCode" required>
              <input type="submit" value="Submit" />
            </form>
          </div>
          <section>
            <!-- Section left/up showing list -->
            <section id="sectionList" class="graphnlist col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <h2>List representation of prerequisites</h2>
                <div>
                  ...
                </div>
            </section>

            <!-- Section right/down showing tree -->
            <section id="sectionTree" class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <h2>Tree representation of prerequisites</h2>

              <!-- div for the tree -->
              <div class="chart" id="chart" style="width:80%; float:right;">
              </div>

                  <!-- Code handling the import of coursecode from URL tag -->
                <script>

                //Get the string entered in searchbar to use for checking if input was okey
                var tempPath = "" + window.location.href;
                tempNameStr=[];
                tempNameStr = tempPath.split("=")[1];

                //Check if input of coursecode into searchbar was correct
                //If correct proceed with building tree
                if (tempNameStr.match(/[A-Z][A-Z][0-9][0-9][0-9][0-9]/gi) && tempNameStr.length == 6) {

                    courseArray = window.location.href.match(/[A-Z][A-Z][0-9][0-9][0-9][0-9]/gi);
                    var isthereTree = 0;
                    if(courseArray!=null){
                      var searchedCode = courseArray[0];
                      var simplConfig = firstCall(searchedCode);
                    }
                  } else { //If input was not a coursecode match with string to create buttons

                    var path = "" + window.location.href;
                    console.log(path);
                    nameStr=[];
                    nameStr = path.split("=");

                      // var searchedCourseName = nameStr[1].replace(/[+]+/g," ");
                      // console.log(path);

                    window.location.href = "buttonPage.html?search=" + nameStr[1];

                      // var simplConfig = firstCall(searchedCourseName);
                  }

                </script>

                <!-- Libraries and creating the tree itself -->
                <script src="js/treant/Treant.js"></script>
                <script src="js/jquery-3.5.0.min.js"></script>
                <script src="js/raphael.js"></script>

                <script type="text/javascript" src="js/main.js"></script>
                <script type="text/javascript">

                tree = new Treant( simplConfig, $ );

                // document.getElementById("loadingContainer").style.display = "none";
                </script>
                <script>
                  $(document).ready(function(){
                      $("#loadingContainer").fadeOut();
                  });
                </script>
            </section>
          </section>
        </div>

      </div>

      <footer>
        <a href="index.html" class="col-lg-2 col-sm-2 col-md-2 col-xs-2"> Home &nbsp</a>
        <a href="about.html" class="col-lg-2 col-sm-2 col-md-2 col-xs-2"> About &nbsp</a>
        <a href="help.html"  class="col-lg-2 col-sm-2 col-md-2 col-xs-2"> Help/FAQ &nbsp</a>
        <a href="https://pegasuskth.github.io/pegasus-projectpage.github.io/"  class="col-lg-2 col-sm-2 col-md-2 col-xs-2"> Project Website</a>
        <a href="mailto:rasham@kth.se" class="col-lg-2 col-sm-2 col-md-2 col-xs-2">Contact:&nbsp rasham@kth.se</a>
      </footer>
    </div>
  </body>
</html>
