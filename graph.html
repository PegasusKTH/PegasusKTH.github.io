<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="image/tab-logo.png">
    <!-- <script type="text/javascript" src="js/lookup.js"></script>
    <script type="text/javascript" src="js/node.js"></script>
    <script type="text/javascript" src="js/main.js"></script> -->
    <link rel="stylesheet" href="js/treant/Treant.css">
    <title> Prerequisites </title>
    <link href="css/graph.css" rel="stylesheet">
    <!-- fonts from google api for the headers -->
    <link href="https://fonts.googleapis.com/css2?family=Aclonica&family=Audiowide&family=Days+One&family=Fredoka+One&family=Shrikhand&display=swap" rel="stylesheet">
    <!-- fonts from google api for the content text -->
    <link href="https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@300&family=Manrope&family=Montserrat&family=Rubik&display=swap" rel="stylesheet">
  </head>

  <body style="background-image: url('image/background3-version2.jpg');" id="background" >

      <div id = "loadingContainer">
        <img class= "col-lg-3 col-md-3 col-sm-3 col-xs-3"  id = "loading-image" src = "image/animation-big-glitter-dark-shadow.gif" />
        <!-- RIP cat -->
        <!-- <img class= "col-lg-1 col-md-1 col-sm-1 col-xs-1"  id = "loading-image-bar" src = "image/catSpin.gif"/> -->
        <p id="loadingText">Building treestructure</p>
      </div>

      <script type="text/javascript" src="js/lookup.js"></script>
      <script type="text/javascript" src="js/node.js"></script>
      <script type="text/javascript" src="js/main.js"></script>
      <script type="text/javascript" src="js/prereqList.js"></script>

    <div id="container">
      <div id="content-wrap">
        <div id="title" >
          <a href="index.html">
            <img src = "image/logo.png" id="pegasus" class="center" alt="Logo Pegasus Project group" title="Learning is Magic">
          </a>
          <h1 id="prereqHeder" class="center"></h1>
          <!-- writes Prerequisites for course: XXXX. XXXX is replest vid coures code  -->
          <script> document.getElementById("prereqHeder").innerHTML = "Prerequisites for course: " + window.location.href.match(/[A-Z][A-Z][0-9][0-9][0-9][0-9]/gi)[0]; </script>
        </div>

        <div>
          <script>
            courseArray = window.location.href.match(/[A-Z][A-Z][0-9][0-9][0-9][0-9]/gi);
            if(courseArray!=null){
              var searchedCode = courseArray[0];
              var simplConfig = firstCall(searchedCode);
            }


            else{
                var path = "" + window.location.href;
                //console.log(path);
                nameStr=[];
                nameStr = path.split("=");
                var searchedCourseName = nameStr[1].replace(/[+]+/g," ");

                var simplConfig = firstCall(searchedCourseName);
            }

          </script>
          <section>
            <!-- Section 1 -->
            <section id="section1" class="graphnlist col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <div>List representation of prerequisites</div>
                <div id="prereqList">
                  <script>
                  traverseGraph(getRootNode());
                  </script>
                </div>
            </section>

            <!-- Section 2 -->
            <section id="section2" class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <div class="graphnlist">Tree representation of prerequisites</div>

              <!-- div for the tree -->
              <div class="chart" id="chart" style="width:80%; float:right;">
              </div>

                  <!-- Code handling the import of coursecode from URL tag -->


                <!-- Libraries and creating the tree itself -->
                <script src="js/treant/Treant.js"></script>
                <script src="js/jquery-3.5.0.min.js"></script>
                <script src="js/raphael.js"></script>

                <script type="text/javascript" src="js/main.js"></script>
                <script type="text/javascript">
                  tree = new Treant( simplConfig, $ );
                  // document.getElementById("loadingContainer").style.display = "none";
                </script>
                <script>
                  $(document).ready(function(){
                      $("#loadingContainer").fadeOut();
                  });
                </script>



            </section>
          </section>
        </div>

      </div>


    </div>
  </body>
  <footer id="footer">
  <a href="index.html" class="col-lg-2 col-sm-2 col-md-2 col-xs-2"> Home &nbsp</a>
  <a href="about.html" class="col-lg-2 col-sm-2 col-md-2 col-xs-2"> About &nbsp</a>
  <a href="help.html"  class="col-lg-2 col-sm-2 col-md-2 col-xs-2"> Help/FAQ &nbsp</a>
  <a href="https://pegasuskth.github.io/pegasus-projectpage.github.io/"  class="col-lg-2 col-sm-2 col-md-2 col-xs-2"> Project Website</a>
  <a href="mailto:rasham@kth.se" class="col-lg-2 col-sm-2 col-md-2 col-xs-2">Contact:&nbsp rasham@kth.se</a>
  </footer>
</html>
